id: CCN2
name: CCN2
description: Cell Cluster Nomenclature version 2.0 schema $ref:'https://github.com/brain-bican/CCN2/blob/main/src/schema/schema.json'

prefixes:
  linkml: https://w3id.org/linkml/

imports:
  - linkml:types

default_curi_maps:
  - semweb_context

default_prefix: CCN2

default_range: string

types:
  string:
    base: str
    uri: xsd:string
  number:
    base: float
    uri: xsd:float

# Note: add slot/required in alphabetical orders
classes:
  Taxonomy:
    slots:
      - cell_set_accession
      - cell_type_name
      - classifying_ontology_term_id
      - classifying_ontology_term_name
      - classification_provenance
      - classification_comment
      - description
      - parent_cell_set_accession
      - rank
      - synonyms
      - synonym_provenance
    slot_usage:
      cell_set_accession:
        required: true
      classifying_ontology_term_name:
        required: true
      classification_provenance:
        required: true
      parent_cell_set_accession:
        required: true
    #additionalProperties: false

  CrossTaxonomyMapping:
    slots:
      - cell_set_accession
      - cell_type_name
      - evidence_comment
      - mapped_cell_set_accession
      - mapped_cell_type_name
      - provenance
      - similarity_score
    slot_usage:
      cell_set_accession:
        required: true
      cell_type_name:
        required: true
      evidence_comment:
        required: true
      mapped_cell_set_accession:
        required: true
      mapped_cell_type_name:
        required: true
    # additionalProperties: false  

  LocationMapping:
    slots:
      - cell_set_accession
      - cell_type_name
      - evidence_comment
      - location_ontology_term_id
      - location_ontology_term_name
      - provenance
      - supporting_data
    slot_usage:
      cell_set_accession:
        required: true
      cell_type_name:
        required: true
      location_ontology_term_id:
        required: true
      location_ontology_term_name:
        required: true
      provenance:
        required: true
    # additionalProperties: false  

  CellSetAccessionToCellMapping:
    slots:
      - cell_accessions
      - sample
    slot_usage:
      cell_accessions:
        required: true
      sample:
        required: true
    # additionalProperties: false  


# Note: define slots in alphabetical orders
slots:
  cell_accessions:
    range: string
    multivalued: true
    description: "List of cell set accession identifiers."

  classifying_ontology_term_id:
    range: string
    description: "The ID of an ontology term that classifies the cell type defined by this node."

  classifying_ontology_term_name:
    range: string
    description: "The name of the ontology term in the classification_id column"

  classification_comment:
    range: string
    description: "A free text comment describing the evidence for this classification."

  classification_provenance:
    range: string
    description: "Either the DOI(s) of a supporting publication (in the form the form doi:10.1126/journal.abj6641) or the editor's ORCID (in the form: ORCID:01243-234-678). Multiple entries should be separated by a '|'."

  cell_set_accession:
    range: string
    description: "Primary identifier of the cell set. This field should be programmatically assigned, not edited."
    readonly: true

  cell_type_name:
    range: string
    description: "The primary name/symbol to be used for the (provisional) cell type defined by this cell set. This is left optional, but is strongly encouraged for every node that is linked."
    aliases: "primary_cell_type_alias"

  description:
    range: string
    description: "Optional free text description of the cluster. This could be particularly useful for describing the properties of cells clustered from techniques that provide data on morphology, function and connectivity, e.g. patch-seq & epi-retro-seq."

  evidence_comment:
    range: string
    description: "A free text description of the evidence supporting this mapping. If a similarity_score is include, please also include details of how this was calculated."

  location_ontology_term_id:
    range: string
    description: "The ID of an ontology term that refers to a brain region that this cell type is located in. Ideally this should be the ID of a term defined as a region in a standard atlas."

  location_ontology_term_name:
    range: string
    description: "Name of the term whose ID is recorded in the ontology_term_id field."

  mapped_cell_set_accession:
    range: string
    description: "The accession (ID) of a cell set in a second taxonomy that this cell set maps to."

  mapped_cell_type_name:
    range: string
    description: "The name of the cell type corresponding to the mapped_cell_set_accession."

  parent_cell_set_accession:
    range: string
    description: "The cell set accession of the parent cell set in the taxonomy. This field should be programmatically assigned, not edited."

  provenance:
    range: string
    description: "ORCID of the person doing the mapping using the syntax ORCID:0123-4567-890. Optionally include supporting publications using DOIs of the form doi:10.1126/journal.abj6641."

  rank:
    description: "Algorithmically generated hierarchical taxonomies can be complex, with many nodes between root and leaf and branches of variable depth. To simplify this for display and discussion it can be useful to assign nodes to a 3 level hierarchy, with leaf nodes at the bottom."
    range: RankEnum

  sample:
    range: string
    description: "Cell sample identifier."

  similarity_score:
    range: number
    description: "A score recording the similarity between mapped nodes."
    minimum_value: 0
    maximum_value: 1

  supporting_data:
    range: string
    description: "A link to data supporting this location mapping."

  synonyms:
    range: string
    description: "A list of alternative names for this cell type. Separate entries with a '|'. Do not use terms with a scope that is much narrower or broader than the cell type being described."

  synonym_provenance:
    range: string
    description: "Each entry in the synonyms field should have a corresponding entry here, either the DOI of a supporting publication (in the form the form doi:10.1126/journal.abj6641) or the editor's ORCID (in the form: ORCID:01243-234-678). Multiple entries should be separated by a '|'."

# enumerations   
enums:
  RankEnum:
    permissible_values:
      leaf_node: {}
      family: {}
      genus: {}

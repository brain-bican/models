id: https://identifiers.org/brain-bican/kb-model
name: kb-model
prefixes:
  linkml: https://w3id.org/linkml/
  biolink: https://w3id.org/biolink/vocab/
  bican: https://identifiers.org/brain-bican/vocab/
  spdx: http://spdx.org/rdf/terms#
  schema: http://schema.org/
  ncbi: https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Info&id=
  NCBIAssembly: https://www.ncbi.nlm.nih.gov/assembly/

imports:
  - linkml:types
  - biolink:biolink-model
default_range: string
default_prefix: bican

classes:
  gene annotation:
    is_a: gene
    description: >-
      An annotation describing the location, boundaries, and functions of 
      individual genes within a genome annotation.
    slots:
      - referenced in
      - molecular type
      - source id
    id_prefixes:
      - ENSEMBL
      - MGI
      - NCBIGene

  genome annotation:
    is_a: genome
    description: >-
      Location and nomenclature of genes and all of the coding regions in a genome assembly 
      and the classification of genes and transcripts into types.
    slots:
      - reference assembly
      - version
      - digest
      - content_url
      - authority

  genome assembly:
    is_a: named thing
    mixins:
      - thing with taxon
    description: >-
      Genome assembly to contain version and label information
    slots:
      - version
      - strain

  checksum:
    is_a: entity
    description: >-
      Checksum values associated with digital entities.
    slots:
      - checksum algorithm
    attributes:
      value: 
        description: The checksum value obtained from a specific cryotographic hash function.
  
  annotation collection:
    tree_root: true
    attributes:
      annotations:
        multivalued: true
        inlined_as_list: true
        range: gene annotation
      genome_annotations:
        multivalued: true
        inlined_as_list: true
        range: genome annotation
      genome_assemblies:
        multivalued: true
        inlined_as_list: true
        range: genome assembly

  process:
    description: >-
      A process that takes input entities and produces output entities.
    slots:
      - input entity
      - output entity
      - process id 


  brain extraction:
    description: >-
      A process that takes a brain sample from a donor and produces a brain segment.
    is_a: process
    slot_usage:
      input entity:
        range: donor
      output entity:
        range: brain segment

  brain segment sectioning:
    description: >-
      A process that takes a brain segment and produces a brain section.
    is_a: process
    slot_usage:
      input entity:
        range: brain segment
      output entity:
        range: brain section

  tissue dissecting:
    description: >-
      A process that takes a brain section and produces a tissue sample.
    is_a: process
    slot_usage:
      input entity:
        range: brain section
      output entity:
        range: tissue sample

  cell dissociation:
    description: >-
      A process that takes a tissue sample and produces a dissociated cell sample.
    is_a: process
    slot_usage:
      input entity:
        range: tissue sample
      output entity:
        range: dissociated cell sample

  cell enrichment:
    description: >-
      A process that takes a dissociated cell sample and produces an enriched cell sample.
    is_a: process
    slot_usage:
      input entity:
        range: dissociated cell sample
      output entity:
        range: enriched cell sample 

  cell barcoding:
    description: >-
      A process that takes an enriched cell sample and produces a barcoded cell sample.
    is_a: process
    slot_usage:
      input entity:
        range: enriched cell sample
      output entity:
        range: barcoded cell sample

  cdna amplification:
    description: >-
      A process that takes a barcoded cell sample and produces an amplified cDNA sample.
    is_a: process
    slot_usage:
      input entity:
        range: barcoded cell sample
      output entity:
        range: amplified cdna
  
  library construction:
    description: >-
      A process that takes an amplified cDNA sample and produces a library.
    is_a: process
    slot_usage:
      input entity:
        range: amplified cdna
      output entity:
        range: library
  
  library aliquoting:
    description: >-
      A process that takes a library and produces an library aliquot.
    is_a: process
    slot_usage:
      input entity:
        range: library
      output entity:
        range: library aliquot

  library pooling:
    description: >-
      A process that takes a library aliquot and produces a library pool.
    is_a: process
    slot_usage:
      input entity:
        range: library aliquot
      output entity:
        range: library pool


  process output:
    description: >-
      The output of a process.
    slots:
      - label
      - created by process


  # 028 - donors.ipynb
  donor:
    is_a: entity
    mixins:
      - thing with taxon
    description: >-
      A person or organism that is the source of a biological sample.
    slots:
      - label
      - sex
      - date of birth
      - date of death
      - age at death
      - full genotype



  # 027 - brain_extraction.ipynb
  brain segment:
    is_a: process output
    slots:
      - barcode
    attributes:
      anatomical division:
    slot_usage:
      created by process:
        range: brain extraction
    


  # 026 - brain_segment_sectioning.ipynb
  brain section:
    is_a: process output
    slots:
      - barcode
    attributes:
      ordinal:
        description: >-
          The ordinal number of the section.
        range: integer
    slot_usage:
      created by process:
        range: brain segment sectioning


  # 025b - tissue_dissectioning.ipynb
  tissue sample:
    is_a: process output
    attributes:
      roi plan:
      region of interest label:
        description: >-
          The label of the region of interest.
    slot_usage:
      created by process:
        range: tissue dissecting


  # 024 - cell_dissociation.ipynb
  dissociated cell sample:
    is_a: process output
    attributes:
      cell prep type:
      facs population plan: 
      number of cells collected:
        range: integer
    slot_usage:
      created by process:
        range: cell dissociation


  #TODO: Add addtional attributes and slots to this class.
  enriched cell sample:
    is_a: process output
    slot_usage:
      created by process:
        range: cell enrichment


  # 023 - cell_barcoding.ipynb
  barcoded cell sample:
    is_a: process output
    attributes:
      port well:
      sample quality count:
    slot_usage:
      created by process:
        range: cell barcoding


  # 022 - cnda_amplification.ipynb
  amplified cdna:
    is_a: process output
    slots:
      - method
    attributes:
      amplified quantity:
        description: >-
          Amount of cDNA amplified (ng).
        range: float
      pcr cycles:
        description: >-
          Number of PCR cycles used to amplify the cDNA.
        range: integer
      percent cdna longer than 400bp:
        description: >-
          The percentage of cDNA fragments that are longer than 400bp.
        range: float
      rna amplification pass:
        range: boolean
    slot_usage:
      created by process:
        range: cdna amplification



  # 021 - library_constructions.ipynb
  library:
    is_a: process output
    slots:
      - method 
      - creation date
    attributes:
      avg size:
        description: The average size (bp) of the library fragments. bp stands for base pairs.
        range: integer
      input amount:
        description: The amount of input material (ng) used to create the library.
        range: float
      library prep pass:
        range: boolean
      quantification fmol:
        range: float
      quantification ng:
        range: float
      quantification nm: 
        range: float
      r1 index:
      r1 sequence:
      r2 index:
      r2 sequence:
      created by process:
        range: library construction
    slot_usage:
      creation date:    
        description: The date and time the object was created. 
        range: datetime
      created by process:
        range: library construction
      

  # 020 - aliquoting_and_pooling.ipynb
  library aliquot:
    is_a: process output
    attributes:
      input quantity:
        description: The amount of input material (fmol) used to create the library aliquot.
        range: integer
    slot_usage:
      created by process:
        range: library aliquoting


  # 020 - aliquoting_and_pooling.ipynb
  library pool:
    is_a: process output
    attributes:
      tube avg size:
        description: The average size (bp) of the library fragments in the tube.
        range: integer
      tube contents:
        description: The content concentration (nm).
        range: float
      tube internal label:
    slot_usage:
      created by process:
        range: library pooling


slots:
  referenced in:
    range: genome annotation

  molecular type:
    range: BioType

  reference assembly:
    range: uriorcurie

  digest:
    description: Stores checksum information. 
    range: checksum
    multivalued: true
    required: true

  content_url:
    slot_uri: schema:url
    multivalued: true

  authority:
    description: The organization responsible for publishing the data. 

  checksum algorithm:
    description: The type of cryptographic hash function used to calculate the checksum value.
    range: DigestType

  source id:
    description: The authority specific identifier. 
    slot_uri: schema:identifier
  
  strain:
    description: The genetic variant or subtype of a species or organism. 

  label:
    description: The name of the object.
    slot_uri: schema:name

  sex:
    range: SexType  
  
  date of birth:
    description: The date of birth of the donor.
    range: date

  date of death:
    description: The date of death of the donor.
    range: date
  
  age at death:
    description: The age of the donor at the time of death.
    range: string

  full genotype:  
    description: The full genotype of the donor.
    range: string

  barcode: 
    description: The unique identifier of the object.
    slot_uri: schema:identifier

  method:
    description: 
    slot_uri: schema:name

  input entity:
    description: The input entity of the process.

  output entity:
    description: The output entity of the process.

  process id:
    description: The id of the process.
    range: string
  
  created by process:
    description: The process that created the object.
    
  


  # SLOTS IMPORTED FROM BIOLINK #
  # creation date:
  # version:




enums:
  DigestType:
    permissible_values:
      SHA1:
        meaning: spdx:checksumAlgorithm_sha1
      MD5:
        meaning: spdx:checksumAlgorithm_md5
      SHA256:
        meaning: spdx:checksumAlgorithm_sha256

  SexType:
    permissible_values:
      female:
      male:

  BioType:
    permissible_values:
      protein_coding:
      noncoding:

  TaxonType:
    permissible_values:
      mouse:
        meaning: ncbi:10090
      human:
        meaning: ncbi:9606

